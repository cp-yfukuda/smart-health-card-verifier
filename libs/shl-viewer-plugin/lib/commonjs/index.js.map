{"version":3,"names":["_jwsUtils","require","_shlLoader","_interopRequireDefault","_types","Object","keys","forEach","key","prototype","hasOwnProperty","call","_exportNames","exports","defineProperty","enumerable","get","obj","__esModule","default","_defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","SHLViewer","constructor","shlLoader","SHLLoader","canSupport","payloads","length","indexOf","protocol","Promise","resolve","reject","validate","shlURL","getIPSURL","jws","getJWS","e","console","info"],"sources":["index.tsx"],"sourcesContent":["import type { IParserBase, BaseResponse } from 'parser-sdk'\nimport { getJWS } from 'jws-utils'\nimport SHLLoader from './shlLoader';\nexport  * from './types'\n\n\n\n\nexport class SHLViewer implements IParserBase {\n  shlLoader: SHLLoader\n  constructor () {\n    this.shlLoader = new SHLLoader();\n  }\n  \n  canSupport( payloads: string[] ): Promise< IParserBase|null > {\n    if ( payloads.length > 0 &&\n         payloads[0].indexOf(this.shlLoader.protocol) >= 0 ) {\n       return Promise.resolve( this )\n    }\n    return Promise.reject(null)\n  }\n\n  async validate(payloads: string[]): Promise< null | BaseResponse > {\n    try {\n      let shlURL = this.shlLoader.getIPSURL(payloads[0])\n      if( shlURL ) {\n        let jws = await getJWS( this.shlLoader.protocol, [shlURL] )\n        Promise.resolve({jws});\n      }\n    } catch ( e ) {\n      console.info( e )\n    }\n    // let ipsContent  = await this.shlLoader.loadSHLContent(payloads);\n    // return await getRecord( ipsContent );\n    return Promise.reject(null)\n  }\n\n}\n"],"mappings":";;;;;;;;;AACA,IAAAA,SAAA,GAAAC,OAAA;AACA,IAAAC,UAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,MAAA,GAAAH,OAAA;AAAAI,MAAA,CAAAC,IAAA,CAAAF,MAAA,EAAAG,OAAA,WAAAC,GAAA;EAAA,IAAAA,GAAA,kBAAAA,GAAA;EAAA,IAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAC,YAAA,EAAAJ,GAAA;EAAA,IAAAA,GAAA,IAAAK,OAAA,IAAAA,OAAA,CAAAL,GAAA,MAAAJ,MAAA,CAAAI,GAAA;EAAAH,MAAA,CAAAS,cAAA,CAAAD,OAAA,EAAAL,GAAA;IAAAO,UAAA;IAAAC,GAAA,WAAAA,CAAA;MAAA,OAAAZ,MAAA,CAAAI,GAAA;IAAA;EAAA;AAAA;AAAwB,SAAAL,uBAAAc,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,SAAAG,gBAAAH,GAAA,EAAAT,GAAA,EAAAa,KAAA,IAAAb,GAAA,GAAAc,cAAA,CAAAd,GAAA,OAAAA,GAAA,IAAAS,GAAA,IAAAZ,MAAA,CAAAS,cAAA,CAAAG,GAAA,EAAAT,GAAA,IAAAa,KAAA,EAAAA,KAAA,EAAAN,UAAA,QAAAQ,YAAA,QAAAC,QAAA,oBAAAP,GAAA,CAAAT,GAAA,IAAAa,KAAA,WAAAJ,GAAA;AAAA,SAAAK,eAAAG,GAAA,QAAAjB,GAAA,GAAAkB,YAAA,CAAAD,GAAA,2BAAAjB,GAAA,gBAAAA,GAAA,GAAAmB,MAAA,CAAAnB,GAAA;AAAA,SAAAkB,aAAAE,KAAA,EAAAC,IAAA,eAAAD,KAAA,iBAAAA,KAAA,kBAAAA,KAAA,MAAAE,IAAA,GAAAF,KAAA,CAAAG,MAAA,CAAAC,WAAA,OAAAF,IAAA,KAAAG,SAAA,QAAAC,GAAA,GAAAJ,IAAA,CAAAnB,IAAA,CAAAiB,KAAA,EAAAC,IAAA,2BAAAK,GAAA,sBAAAA,GAAA,YAAAC,SAAA,4DAAAN,IAAA,gBAAAF,MAAA,GAAAS,MAAA,EAAAR,KAAA;AAKjB,MAAMS,SAAS,CAAwB;EAE5CC,WAAWA,CAAA,EAAI;IAAAlB,eAAA;IACb,IAAI,CAACmB,SAAS,GAAG,IAAIC,kBAAS,EAAE;EAClC;EAEAC,UAAUA,CAAEC,QAAkB,EAAgC;IAC5D,IAAKA,QAAQ,CAACC,MAAM,GAAG,CAAC,IACnBD,QAAQ,CAAC,CAAC,CAAC,CAACE,OAAO,CAAC,IAAI,CAACL,SAAS,CAACM,QAAQ,CAAC,IAAI,CAAC,EAAG;MACtD,OAAOC,OAAO,CAACC,OAAO,CAAE,IAAI,CAAE;IACjC;IACA,OAAOD,OAAO,CAACE,MAAM,CAAC,IAAI,CAAC;EAC7B;EAEA,MAAMC,QAAQA,CAACP,QAAkB,EAAkC;IACjE,IAAI;MACF,IAAIQ,MAAM,GAAG,IAAI,CAACX,SAAS,CAACY,SAAS,CAACT,QAAQ,CAAC,CAAC,CAAC,CAAC;MAClD,IAAIQ,MAAM,EAAG;QACX,IAAIE,GAAG,GAAG,MAAM,IAAAC,gBAAM,EAAE,IAAI,CAACd,SAAS,CAACM,QAAQ,EAAE,CAACK,MAAM,CAAC,CAAE;QAC3DJ,OAAO,CAACC,OAAO,CAAC;UAACK;QAAG,CAAC,CAAC;MACxB;IACF,CAAC,CAAC,OAAQE,CAAC,EAAG;MACZC,OAAO,CAACC,IAAI,CAAEF,CAAC,CAAE;IACnB;IACA;IACA;IACA,OAAOR,OAAO,CAACE,MAAM,CAAC,IAAI,CAAC;EAC7B;AAEF;AAACnC,OAAA,CAAAwB,SAAA,GAAAA,SAAA"}