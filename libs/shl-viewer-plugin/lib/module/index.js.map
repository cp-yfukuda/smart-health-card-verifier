{"version":3,"names":["getJWS","SHLLoader","SHLViewer","constructor","_defineProperty","shlLoader","canSupport","payloads","length","indexOf","protocol","Promise","resolve","reject","validate","shlURL","getIPSURL","jws","e","console","info"],"sources":["index.tsx"],"sourcesContent":["import type { IParserBase, BaseResponse } from 'parser-sdk'\nimport { getJWS } from 'jws-utils'\nimport SHLLoader from './shlLoader';\nexport  * from './types'\n\n\n\n\nexport class SHLViewer implements IParserBase {\n  shlLoader: SHLLoader\n  constructor () {\n    this.shlLoader = new SHLLoader();\n  }\n  \n  canSupport( payloads: string[] ): Promise< IParserBase|null > {\n    if ( payloads.length > 0 &&\n         payloads[0].indexOf(this.shlLoader.protocol) >= 0 ) {\n       return Promise.resolve( this )\n    }\n    return Promise.reject(null)\n  }\n\n  async validate(payloads: string[]): Promise< null | BaseResponse > {\n    try {\n      let shlURL = this.shlLoader.getIPSURL(payloads[0])\n      if( shlURL ) {\n        let jws = await getJWS( this.shlLoader.protocol, [shlURL] )\n        Promise.resolve({jws});\n      }\n    } catch ( e ) {\n      console.info( e )\n    }\n    // let ipsContent  = await this.shlLoader.loadSHLContent(payloads);\n    // return await getRecord( ipsContent );\n    return Promise.reject(null)\n  }\n\n}\n"],"mappings":";;;AACA,SAASA,MAAM,QAAQ,WAAW;AAClC,OAAOC,SAAS,MAAM,aAAa;AACnC,cAAe,SAAS;AAKxB,OAAO,MAAMC,SAAS,CAAwB;EAE5CC,WAAWA,CAAA,EAAI;IAAAC,eAAA;IACb,IAAI,CAACC,SAAS,GAAG,IAAIJ,SAAS,EAAE;EAClC;EAEAK,UAAUA,CAAEC,QAAkB,EAAgC;IAC5D,IAAKA,QAAQ,CAACC,MAAM,GAAG,CAAC,IACnBD,QAAQ,CAAC,CAAC,CAAC,CAACE,OAAO,CAAC,IAAI,CAACJ,SAAS,CAACK,QAAQ,CAAC,IAAI,CAAC,EAAG;MACtD,OAAOC,OAAO,CAACC,OAAO,CAAE,IAAI,CAAE;IACjC;IACA,OAAOD,OAAO,CAACE,MAAM,CAAC,IAAI,CAAC;EAC7B;EAEA,MAAMC,QAAQA,CAACP,QAAkB,EAAkC;IACjE,IAAI;MACF,IAAIQ,MAAM,GAAG,IAAI,CAACV,SAAS,CAACW,SAAS,CAACT,QAAQ,CAAC,CAAC,CAAC,CAAC;MAClD,IAAIQ,MAAM,EAAG;QACX,IAAIE,GAAG,GAAG,MAAMjB,MAAM,CAAE,IAAI,CAACK,SAAS,CAACK,QAAQ,EAAE,CAACK,MAAM,CAAC,CAAE;QAC3DJ,OAAO,CAACC,OAAO,CAAC;UAACK;QAAG,CAAC,CAAC;MACxB;IACF,CAAC,CAAC,OAAQC,CAAC,EAAG;MACZC,OAAO,CAACC,IAAI,CAAEF,CAAC,CAAE;IACnB;IACA;IACA;IACA,OAAOP,OAAO,CAACE,MAAM,CAAC,IAAI,CAAC;EAC7B;AAEF"}