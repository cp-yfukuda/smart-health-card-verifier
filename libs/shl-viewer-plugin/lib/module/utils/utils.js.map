{"version":3,"names":["formatDateOfBirth","birthDate","year","month","day","split","dateOfBirth","sortRecordByDateField","dateFieldName","records","sort","a","b","Date","parse","index","rec","entries","fetchWithTimeout","url","options","arguments","length","undefined","timeout","timeoutError","controller","AbortController","timerPromise","Promise","_","reject","setTimeout","abort","race","fetch","signal"],"sources":["utils.ts"],"sourcesContent":["// NOTE: Timezone affects date presentation, so in US it will be 1 day behind,\n//       that is why `new Date()` is not needed.\n//       Birthday date in FHIR => \"birthDate\": \"1960-01-20\"\nexport const formatDateOfBirth = (birthDate: string): string => {\n    const [year, month, day] = birthDate.split('-')\n  \n    const dateOfBirth = `${month}/${day}/${year}`\n  \n    return dateOfBirth\n}\n\nexport const sortRecordByDateField = ( dateFieldName: string, records: any[] ) => {\n    records.sort((a, b) => Date.parse(a[dateFieldName]) - Date.parse(b[dateFieldName]))\n    // set correct dose number if dose objects are swapped\n    for (const [index, rec] of records.entries()) {\n      rec.index = index + 1\n    }\n}\n\nexport async function fetchWithTimeout (url: string, options: any={}, timeout: number, timeoutError: string): Promise<any> {\n  \n  const controller = new AbortController()\n  const timerPromise = new Promise((_, reject) => {\n    setTimeout(() => {\n      controller.abort()\n      reject( timeoutError )\n    }, timeout)\n  })\n  return await Promise.race( [fetch( url, {\n    ...options,\n    signal: controller.signal  \n  }), timerPromise ] )\n}\n\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAO,MAAMA,iBAAiB,GAAIC,SAAiB,IAAa;EAC5D,MAAM,CAACC,IAAI,EAAEC,KAAK,EAAEC,GAAG,CAAC,GAAGH,SAAS,CAACI,KAAK,CAAC,GAAG,CAAC;EAE/C,MAAMC,WAAW,GAAI,GAAEH,KAAM,IAAGC,GAAI,IAAGF,IAAK,EAAC;EAE7C,OAAOI,WAAW;AACtB,CAAC;AAED,OAAO,MAAMC,qBAAqB,GAAGA,CAAEC,aAAqB,EAAEC,OAAc,KAAM;EAC9EA,OAAO,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKC,IAAI,CAACC,KAAK,CAACH,CAAC,CAACH,aAAa,CAAC,CAAC,GAAGK,IAAI,CAACC,KAAK,CAACF,CAAC,CAACJ,aAAa,CAAC,CAAC,CAAC;EACnF;EACA,KAAK,MAAM,CAACO,KAAK,EAAEC,GAAG,CAAC,IAAIP,OAAO,CAACQ,OAAO,EAAE,EAAE;IAC5CD,GAAG,CAACD,KAAK,GAAGA,KAAK,GAAG,CAAC;EACvB;AACJ,CAAC;AAED,OAAO,eAAeG,gBAAgBA,CAAEC,GAAW,EAAwE;EAAA,IAAtEC,OAAY,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC,CAAC;EAAA,IAAEG,OAAe,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAAA,IAAEE,YAAoB,GAAAJ,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAEzG,MAAMG,UAAU,GAAG,IAAIC,eAAe,EAAE;EACxC,MAAMC,YAAY,GAAG,IAAIC,OAAO,CAAC,CAACC,CAAC,EAAEC,MAAM,KAAK;IAC9CC,UAAU,CAAC,MAAM;MACfN,UAAU,CAACO,KAAK,EAAE;MAClBF,MAAM,CAAEN,YAAY,CAAE;IACxB,CAAC,EAAED,OAAO,CAAC;EACb,CAAC,CAAC;EACF,OAAO,MAAMK,OAAO,CAACK,IAAI,CAAE,CAACC,KAAK,CAAEhB,GAAG,EAAE;IACtC,GAAGC,OAAO;IACVgB,MAAM,EAAEV,UAAU,CAACU;EACrB,CAAC,CAAC,EAAER,YAAY,CAAE,CAAE;AACtB"}